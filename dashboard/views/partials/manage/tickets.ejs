<div class="row">
    <div class="col-12">
        <h3>Tickets</h3>
        <p class="text-muted">Set up a ticket system for user support.</p>
    </div>
</div>

<div class="content-card mt-4">
    <div class="card-body">
        <h4 class="card-title">Ticket System</h4>
        <p class="card-subtitle mb-3 text-muted">Configure the ticket creation channel and support roles.</p>
        <form action="/manage/<%= guild.id %>/update-tickets" method="POST">
            <div class="mb-3">
                <label for="ticketPanelChannel" class="form-label">Ticket Panel Channel</label>
                <select class="form-select" id="ticketPanelChannel" name="panel_channel_id">
                    <option value="">Select a channel</option>
                    <% channels.forEach(channel => { %>
                        <option value="<%= channel.id %>" <%= ticketConfig && ticketConfig.panel_channel_id === channel.id ? 'selected' : '' %> >#<%= channel.name %></option>
                    <% }) %>
                </select>
                <div class="form-text">The bot will post a "Create Ticket" button in this channel.</div>
            </div>
            <div class="mb-3">
                <label for="ticketCategory" class="form-label">Ticket Category</label>
                <select class="form-select" id="ticketCategory" name="ticket_category_id">
                    <option value="">Select a category</option>
                    <% categories.forEach(category => { %>
                        <option value="<%= category.id %>" <%= ticketConfig && ticketConfig.ticket_category_id === category.id ? 'selected' : '' %>><%= category.name %></option>
                    <% }) %>
                </select>
                <div class="form-text">New ticket channels will be created in this category.</div>
            </div>
            <div class="mb-3">
                <label for="ticketSupportRole" class="form-label">Support Team Role</label>
                <select class="form-select" id="ticketSupportRole" name="support_role_id">
                    <option value="">Select a role</option>
                    <% roles.forEach(role => { %>
                        <option value="<%= role.id %>" <%= ticketConfig && ticketConfig.support_role_id === role.id ? 'selected' : '' %>><%= role.name %></option>
                    <% }) %>
                </select>
                <div class="form-text">Users with this role will be able to view and manage tickets.</div>
            </div>
            <button type="submit" class="btn btn-primary">Save Ticket Settings</button>
        </form>
        <form action="/manage/<%= guild.id %>/create-ticket-panel" method="POST" class="mt-3">
            <button type="submit" class="btn btn-info">Create Ticket Panel Message</button>
            <div class="form-text">This will post the ticket creation message in the configured channel.</div>
        </form>
    </div>
</div>