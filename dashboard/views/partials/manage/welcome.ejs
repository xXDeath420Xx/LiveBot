<div class="page-section">
    <div class="page-section-header">
        <div>
            <div class="page-section-title">
                <i class="fas fa-door-open"></i>
                <span>Welcome & Farewell</span>
            </div>
            <div class="page-section-subtitle">
                Set up messages to greet new members and say goodbye to those who leave
            </div>
        </div>
    </div>

    <form action="/manage/<%= guild.id %>/update-welcome" method="POST">
        <!-- Welcome Settings Section -->
        <div style="margin-bottom: var(--spacing-6);">
            <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); color: var(--color-text-primary); margin-bottom: var(--spacing-4);">
                <i class="fas fa-hand-wave" style="color: var(--color-primary-400);"></i>
                Welcome Settings
            </h3>
            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-4);">
                Greet new members when they join your server
            </p>

            <div style="margin-bottom: var(--spacing-4);">
                <label class="form-label">Welcome Channel</label>
                <select class="form-select" name="channel_id">
                    <option value="">Disabled</option>
                    <% channels.forEach(channel => { %>
                        <option value="<%= channel.id %>" <%= (welcomeSettings && welcomeSettings.channel_id === channel.id) ? 'selected' : '' %>>#<%= channel.name %></option>
                    <% }) %>
                </select>
                <div class="form-help">Channel where welcome messages will be posted</div>
            </div>

            <div style="margin-bottom: var(--spacing-4);">
                <label class="form-label">Welcome Message</label>
                <textarea class="form-control" name="message" rows="3" placeholder="Welcome {user} to {server}! We now have {memberCount} members!"><%= (welcomeSettings && welcomeSettings.message) ? welcomeSettings.message : '' %></textarea>
                <div class="form-help">Available placeholders: {user}, {server}, {memberCount}</div>
            </div>

            <!-- Welcome Banner -->
            <div style="background: var(--color-dark-600); border: 1px solid var(--color-dark-400); border-radius: var(--radius-lg); padding: var(--spacing-4); margin-top: var(--spacing-6);">
                <h4 style="font-size: var(--font-size-base); font-weight: var(--font-weight-semibold); color: var(--color-text-primary); margin-bottom: var(--spacing-3);">
                    <i class="fas fa-image" style="color: var(--color-accent-purple);"></i>
                    Welcome Banner
                </h4>

                <div class="form-check" style="margin-bottom: var(--spacing-4);">
                    <input class="form-check-input" type="checkbox" id="banner_enabled" name="banner_enabled" <%= (welcomeSettings && welcomeSettings.banner_enabled) ? 'checked' : '' %>>
                    <label class="form-check-label" for="banner_enabled">
                        Enable Welcome Banner Image
                    </label>
                </div>

                <div class="grid grid-cols-2" style="gap: var(--spacing-4);">
                    <div>
                        <label class="form-label">Title Text</label>
                        <input type="text" class="form-control" name="card_title_text" value="<%= (welcomeSettings && welcomeSettings.card_title_text) ? welcomeSettings.card_title_text : 'Welcome, {user}!' %>" placeholder="Welcome, {user}!">
                    </div>
                    <div>
                        <label class="form-label">Subtitle Text</label>
                        <input type="text" class="form-control" name="card_subtitle_text" value="<%= (welcomeSettings && welcomeSettings.card_subtitle_text) ? welcomeSettings.card_subtitle_text : 'Welcome to {server}!' %>" placeholder="Welcome to {server}!">
                    </div>
                </div>

                <div style="margin-top: var(--spacing-4);">
                    <label class="form-label">Background Image URL</label>
                    <input type="text" class="form-control" name="card_background_url" value="<%= (welcomeSettings && welcomeSettings.card_background_url) ? welcomeSettings.card_background_url : '' %>" placeholder="https://i.imgur.com/example.png">
                    <div class="form-help">Custom background for welcome banner</div>
                </div>
            </div>
        </div>

        <!-- Farewell Settings Section -->
        <div style="margin-bottom: var(--spacing-6);">
            <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); color: var(--color-text-primary); margin-bottom: var(--spacing-4);">
                <i class="fas fa-door-closed" style="color: var(--color-danger);"></i>
                Farewell Settings
            </h3>
            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-4);">
                Announce when a member leaves the server
            </p>

            <div class="form-check" style="margin-bottom: var(--spacing-4);">
                <input class="form-check-input" type="checkbox" id="goodbye_enabled" name="goodbye_enabled" <%= (welcomeSettings && welcomeSettings.goodbye_enabled) ? 'checked' : '' %>>
                <label class="form-check-label" for="goodbye_enabled">
                    Enable Farewell Messages
                </label>
            </div>

            <div style="margin-bottom: var(--spacing-4);">
                <label class="form-label">Farewell Channel</label>
                <select class="form-select" name="goodbye_channel_id">
                    <option value="">Disabled</option>
                    <% channels.forEach(channel => { %>
                        <option value="<%= channel.id %>" <%= (welcomeSettings && welcomeSettings.goodbye_channel_id === channel.id) ? 'selected' : '' %>>#<%= channel.name %></option>
                    <% }) %>
                </select>
                <div class="form-help">Channel where farewell messages will be posted</div>
            </div>

            <div style="margin-bottom: var(--spacing-4);">
                <label class="form-label">Farewell Message</label>
                <textarea class="form-control" name="goodbye_message" rows="3" placeholder="Goodbye {user}, thanks for being part of {server}!"><%= (welcomeSettings && welcomeSettings.goodbye_message) ? welcomeSettings.goodbye_message : '' %></textarea>
                <div class="form-help">Available placeholders: {user}, {server}</div>
            </div>
        </div>

        <div style="display: flex; gap: var(--spacing-3);">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                <span>Save Welcome & Farewell Settings</span>
            </button>
            <button type="button" class="btn btn-secondary" onclick="location.reload()">
                <i class="fas fa-undo"></i>
                <span>Reset Form</span>
            </button>
        </div>
    </form>
</div>

<style>
.form-label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-2);
}

.form-help {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    margin-top: var(--spacing-2);
}

.form-check {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
}

.form-check-input {
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.form-check-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    cursor: pointer;
    user-select: none;
}
</style>