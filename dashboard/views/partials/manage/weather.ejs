<div class="page-section">
    <div class="page-section-header">
        <div>
            <div class="page-section-title">
                <i class="fas fa-cloud-sun"></i>
                <span>Weather Alert System</span>
            </div>
            <div class="page-section-subtitle">
                Configure automatic weather alerts for your server members
            </div>
        </div>
    </div>

    <!-- Stats Overview -->
    <% if (weatherStats) { %>
        <div class="grid grid-cols-3" style="margin-bottom: var(--spacing-6);">
            <div style="background: var(--color-dark-600); padding: var(--spacing-4); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <div style="font-size: var(--font-size-xs); color: var(--color-text-muted); margin-bottom: var(--spacing-1);">Users with Locations</div>
                <div style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); color: var(--color-text-primary);"><%= weatherStats.totalUsers || 0 %></div>
            </div>
            <div style="background: var(--color-dark-600); padding: var(--spacing-4); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <div style="font-size: var(--font-size-xs); color: var(--color-text-muted); margin-bottom: var(--spacing-1);">Active Alerts</div>
                <div style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); color: var(--color-warning);"><%= weatherStats.activeAlerts || 0 %></div>
            </div>
            <div style="background: var(--color-dark-600); padding: var(--spacing-4); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <div style="font-size: var(--font-size-xs); color: var(--color-text-muted); margin-bottom: var(--spacing-1);">Alerts Sent (24h)</div>
                <div style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); color: var(--color-success);"><%= weatherStats.alertsSent || 0 %></div>
            </div>
        </div>
    <% } %>

    <!-- Configuration -->
    <div style="margin-bottom: var(--spacing-6);">
        <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); color: var(--color-text-primary); margin-bottom: var(--spacing-4);">
            <i class="fas fa-cog" style="color: var(--color-primary-400);"></i>
            Weather Alert Configuration
        </h3>
        <form action="/manage/<%= guild.id %>/weather/config" method="POST">
            <div class="form-check" style="margin-bottom: var(--spacing-4);">
                <input class="form-check-input" type="checkbox" id="weatherEnabled" name="enabled" <%= (weatherConfig && weatherConfig.enabled) ? 'checked' : '' %>>
                <label class="form-check-label" for="weatherEnabled">
                    Enable Weather Alerts
                </label>
            </div>
            <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-4);">
                When enabled, users with saved locations will receive DMs for severe weather alerts
            </div>

            <div style="margin-bottom: var(--spacing-4);">
                <label class="form-label">Check Interval (seconds)</label>
                <input type="number" class="form-control" name="checkInterval" value="<%= (weatherConfig && weatherConfig.check_interval) ? weatherConfig.check_interval : 60 %>" min="30" max="300">
                <div class="form-help">How often to check for new weather alerts (30-300 seconds)</div>
            </div>

            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                <span>Save Weather Settings</span>
            </button>
        </form>
    </div>

    <!-- How It Works -->
    <div style="background: var(--color-dark-600); border: 1px solid var(--color-dark-400); border-radius: var(--radius-lg); padding: var(--spacing-5); margin-bottom: var(--spacing-6);">
        <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); color: var(--color-text-primary); margin-bottom: var(--spacing-4);">
            <i class="fas fa-info-circle" style="color: var(--color-primary-400);"></i>
            How It Works
        </h3>
        <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-3);">
            The weather alert system uses the National Weather Service API to monitor severe weather:
        </p>
        <ul style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin: 0; padding-left: var(--spacing-5);">
            <li style="margin-bottom: var(--spacing-2);">Users set their location using <code style="color: var(--color-primary-400);">/weather setlocation [zipcode]</code></li>
            <li style="margin-bottom: var(--spacing-2);">System monitors NWS alerts for affected zones</li>
            <li style="margin-bottom: var(--spacing-2);">Users receive DMs when alerts affect their area</li>
            <li>Supports all US locations via ZIP code lookup</li>
        </ul>
    </div>

    <!-- User Commands -->
    <div style="background: var(--color-dark-600); border: 1px solid var(--color-dark-400); border-radius: var(--radius-lg); padding: var(--spacing-5);">
        <h3 style="font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); color: var(--color-text-primary); margin-bottom: var(--spacing-4);">
            <i class="fas fa-terminal" style="color: var(--color-accent-purple);"></i>
            User Commands
        </h3>
        <div class="grid grid-cols-1" style="gap: var(--spacing-3);">
            <div style="background: var(--color-dark-700); padding: var(--spacing-3); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <code style="color: var(--color-primary-400);">/weather setlocation [zipcode]</code>
                <div style="font-size: var(--font-size-sm); color: var(--color-text-muted); margin-top: var(--spacing-1);">Set ZIP code for weather alerts</div>
            </div>
            <div style="background: var(--color-dark-700); padding: var(--spacing-3); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <code style="color: var(--color-primary-400);">/weather location</code>
                <div style="font-size: var(--font-size-sm); color: var(--color-text-muted); margin-top: var(--spacing-1);">View saved location</div>
            </div>
            <div style="background: var(--color-dark-700); padding: var(--spacing-3); border-radius: var(--radius-md); border: 1px solid var(--color-dark-400);">
                <code style="color: var(--color-primary-400);">/weather remove</code>
                <div style="font-size: var(--font-size-sm); color: var(--color-text-muted); margin-top: var(--spacing-1);">Remove saved location</div>
            </div>
        </div>
    </div>
</div>

<style>
.form-label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-2);
}

.form-help {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    margin-top: var(--spacing-2);
}

.form-check {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
}

.form-check-input {
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.form-check-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    cursor: pointer;
    user-select: none;
}
</style>
